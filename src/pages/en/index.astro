---
import BaseLayout from '../../layouts/BaseLayout.astro';
import Header from '../../components/Header.astro';
import Footer from '../../components/Footer.astro';
import Section from '../../components/ui/Section.astro';
import Container from '../../components/ui/Container.astro';
import Button from '../../components/ui/Button.astro';
import StepCard from '../../components/ui/StepCard.astro';
import Accordion from '../../components/ui/Accordion.astro';
import InstallTabsShowcase from '../../components/InstallTabsShowcase.astro';
import WorkflowAnimation from '../../components/WorkflowAnimation.astro';

const lang = 'en';

const faqItems = [
  {
    question: 'Which operating systems are supported?',
    answer:
      'macOS 12+ (Monterey) is natively supported. Windows 10+ is supported via PowerShell-based services (run_core.ps1). Since it is a Rust-native build, it can also be compiled on Linux.',
  },
  {
    question: 'Can I control my computer using natural language?',
    answer:
      'Yes. By entering natural language instructions like "Open Safari and search for weather on Google" with the surf command, the pipeline works automatically: intent_router → slot_filler → plan_builder → execution_controller → verification_engine.',
  },
  {
    question: 'Is an OpenAI API Key required?',
    answer:
      'Yes. OpenAI API is used for LLM-based behavioral pattern analysis, natural language command interpretation, and workflow generation. You need to set OPENAI_API_KEY in your .env file. GPT-3.5 is sufficient for initial testing.',
  },
  {
    question: 'How is security handled?',
    answer:
      'We apply Zero Trust principles. LLM output is considered dangerous by default and passes through a 5-layer security model (policy.rs, security.rs, tool_policy.rs, privacy.rs PII masking, send_policy.rs). Write Lock is enabled by default, and Critical-grade actions require per-item user approval.',
  },
  {
    question: 'Which external services are integrated?',
    answer:
      'Gmail (view/send emails), Google Calendar (check schedules), Notion (read/write pages), and Telegram (remote control) are supported by default. Integrating with the n8n workflow engine allows for automation of hundreds of additional services.',
  },
  {
    question: 'Can teams use it together?',
    answer:
      'One-click deployment to team members is possible with Tauri-based desktop apps (.app/.exe). It supports n8n workflow sharing, RBAC-based role management, and Self-Healing Guardian (automatic process restart).',
  },
];
---

<BaseLayout title="NOVA — Local OS Super Agent" description="An AI agent that controls your computer using natural language. 73+ Rust modules, 5-layer security, automatic pattern analysis, and workflow generation." lang="en">
  <Header slot="header" lang="en" />

  <!-- Hero -->
  <Section padding="large" class="bg-[#0d0e11] text-white">
    <Container>
      <div class="max-w-4xl mx-auto text-center animate-on-scroll">
        <p class="accent-pill mb-4">Local OS Super Agent</p>
        <h1 class="text-h1 md:text-display text-white mb-6 text-balance max-w-3xl mx-auto">
          Control your computer
          <br class="hidden lg:block" />
          with one line of natural language
        </h1>
        <p class="text-body-lg text-neutral-400 max-w-2xl mx-auto mb-10">
          NOVA is a Rust-native AI agent that understands natural language commands, 
          controls apps at the OS level, and suggests automations by learning your usage patterns via Shadow Mode.
        </p>

        <div class="flex flex-col sm:flex-row items-center justify-center gap-4 mb-10">
          <Button variant="primary" size="lg" href="/docs/getting-started?os=macos" class="whitespace-nowrap min-w-[200px]">
            <svg slot="before" width="20" height="20" viewBox="0 0 24 24" fill="currentColor" style="margin-right: 8px;">
              <path d="M17.05,20.28c-0.96,0.95-2.05,1.72-3.11,1.72s-1.45-0.67-2.73-0.67c-1.29,0-1.87,0.67-2.9,0.67c-1.03,0-2.14-0.81-3.23-1.89 c-1.95-1.93-3.05-4.88-3.05-7.38c0-2.5,1.13-4.63,2.94-5.75c0.91-0.57,2.05-0.91,3.22-0.91c1.29,0,1.96,0.42,3.23,0.42 c1.26,0,1.87-0.42,3.23-0.42c1.07,0,2.1,0.35,3,0.91c-0.48,0.31-1.39,1.12-1.39,2.68c0,1.72,1.35,2.77,2.37,3.31 c-0.74,1.8-1.5,4.01-2.31,5.32L17.05,20.28z M14.19,3.77c0-1.95,1.4-3.56,3.31-3.77c0.23,2.16-1.5,4.2-3.37,4.2 C14.04,4.2,14.19,3.85,14.19,3.77z"/>
            </svg>
            Start for macOS
          </Button>
          <Button variant="secondary" size="lg" href="/docs/getting-started?os=windows" class="whitespace-nowrap min-w-[200px]">
            <svg slot="before" width="20" height="20" viewBox="0 0 24 24" fill="currentColor" style="margin-right: 8px;">
              <path d="M0,3.449L9.75,2.1L9.75,11.55L0,11.55ZM0,12.45L9.75,12.45L9.75,21.9L0,20.55ZM10.65,1.95L24,0L24,11.55L10.65,11.55ZM10.65,12.45L24,12.45L24,24L10.65,22.05Z"/>
            </svg>
            Start for Windows
          </Button>
        </div>

        <WorkflowAnimation />
      </div>
    </Container>
  </Section>

  <!-- Install Showcase -->
  <Section class="bg-[#0f1116]">
    <Container>
      <InstallTabsShowcase />
    </Container>
  </Section>

  <!-- Stats & Commands -->
  <Section class="bg-[#0f1116]">
    <Container>
      <div class="animate-on-scroll">
        <p class="text-center text-caption text-neutral-500 font-medium tracking-wide uppercase mb-10">Core Capabilities</p>

        <div class="flex flex-wrap items-center justify-center gap-8 md:gap-14 mb-16">
          {['surf', 'routine', 'recommend', 'control', 'build_workflow', 'exec', 'status'].map((name) => (
            <div class="flex items-center justify-center h-8 px-4 text-neutral-400 text-sm font-mono font-semibold tracking-wider">{name}</div>
          ))}
        </div>

        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-5 max-w-4xl mx-auto">
          {[
            { value: '73+', label: 'Rust Modules' },
            { value: '5', label: 'Security Layers' },
            { value: '4', label: 'External Integrations' },
            { value: '7', label: 'CLI Commands' },
          ].map((stat) => (
            <div class="text-center rounded-lg border border-white/10 bg-[#14161b] py-8">
              <p class="text-h2 text-white font-bold">{stat.value}</p>
              <p class="text-caption text-neutral-500 mt-1">{stat.label}</p>
            </div>
          ))}
        </div>
      </div>
    </Container>
  </Section>

  <!-- How It Works -->
  <Section>
    <Container>
      <div class="text-center mb-16 animate-on-scroll">
        <h2 class="text-h2 text-neutral-100 mb-4">How It Works</h2>
        <p class="text-body-lg text-neutral-400 max-w-xl mx-auto">An automated pipeline from natural language input to OS control and verification.</p>
      </div>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-12 animate-on-scroll">
        <StepCard step={1} title="Understand" description="intent_router analyzes natural language, and slot_filler extracts parameters needed for execution." />
        <StepCard step={2} title="Execute" description="plan_builder generates an execution plan, while visual_driver and browser_automation control the OS directly." />
        <StepCard step={3} title="Verify" description="verification_engine validates results, and approval_gate blocks dangerous actions in advance." />
      </div>
    </Container>
  </Section>

  <!-- Feature 1: NL Control -->
  <Section background="light">
    <Container>
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-16 items-center animate-on-scroll">
        <div>
          <p class="text-caption text-accent-300 font-medium tracking-wide uppercase mb-3">Natural Language Control</p>
          <h2 class="text-h2 text-neutral-100 mb-6">Execute complex multi-app scenarios with natural language</h2>
          <p class="text-body-lg text-neutral-400 mb-8">
            Handle complex multi-app workflows like "Search stock prices in Safari → Calculate with Calculator → Save in Notes" with a single line of natural language.
          </p>
          <ul class="space-y-3">
            {[
              'surf — The core command for controlling the entire OS with natural language',
              'control — Control app execution, switching, and termination via CLI',
              'exec — Execute shell commands with security policies applied',
            ].map((item) => (
              <li class="flex items-start gap-3 text-body text-neutral-300">
                <svg class="w-5 h-5 text-accent-400 flex-shrink-0 mt-0.5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" /></svg>
                <span><code class="text-accent-300 text-sm">{item.split(' — ')[0]}</code> — {item.split(' — ')[1]}</span>
              </li>
            ))}
          </ul>
        </div>
        <div class="bg-[#14161b] rounded-lg border border-white/10 p-6 font-mono text-sm text-neutral-400">
          <div class="flex items-center gap-2 mb-4 pb-3 border-b border-white/5">
            <span class="w-2.5 h-2.5 rounded-full bg-[#ff5f57]"></span>
            <span class="w-2.5 h-2.5 rounded-full bg-[#febc2e]"></span>
            <span class="w-2.5 h-2.5 rounded-full bg-[#28c840]"></span>
            <span class="ml-2 text-xs text-neutral-600">nova-agent</span>
          </div>
          <p class="text-neutral-500 mb-2">$ cargo run --bin local_os_agent</p>
          <p class="text-[#8fd5a6]">&gt; surf "Open Safari and search for Apple stock price on Google"</p>
          <p class="text-neutral-300 mt-2">Intent: web_search | Slots: {`{app: Safari, query: Apple stock price}`}</p>
          <p class="text-neutral-300">Plan: Open Safari → Navigate → Search → Extract</p>
          <p class="text-[#8fd5a6] mt-1">[OK] Safari execution completed (applescript.rs)</p>
          <p class="text-[#8fd5a6]">[OK] Google search completed (browser_automation.rs)</p>
          <p class="text-[#8fd5a6]">[OK] Result extraction completed (visual_driver.rs)</p>
          <p class="text-neutral-500 mt-3">&gt; control Notes open</p>
          <p class="text-[#8fd5a6] mt-1">[OK] Notes execution completed</p>
        </div>
      </div>
    </Container>
  </Section>

  <!-- Feature 2: Security -->
  <Section>
    <Container>
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-16 items-center animate-on-scroll">
        <div class="order-2 lg:order-1 bg-[#14161b] rounded-lg border border-white/10 p-6 font-mono text-sm text-neutral-400">
          <div class="flex items-center gap-2 mb-4 pb-3 border-b border-white/5">
            <span class="w-2.5 h-2.5 rounded-full bg-[#ff5f57]"></span>
            <span class="w-2.5 h-2.5 rounded-full bg-[#febc2e]"></span>
            <span class="w-2.5 h-2.5 rounded-full bg-[#28c840]"></span>
            <span class="ml-2 text-xs text-neutral-600">nova-agent</span>
          </div>
          <p class="text-[#8fd5a6]">&gt; exec "echo hello world"</p>
          <p class="text-neutral-300 mt-1">[Safe] hello world</p>
          <p class="text-[#8fd5a6] mt-3">&gt; exec "rm -rf /"</p>
          <p class="text-red-400 mt-1">[BLOCKED] security.rs: Critical — Dangerous command blocked</p>
          <p class="text-[#8fd5a6] mt-3">&gt; exec "sudo apt install"</p>
          <p class="text-red-400 mt-1">[BLOCKED] policy.rs: Caution — Write Lock active</p>
          <p class="text-[#8fd5a6] mt-3">&gt; unlock</p>
          <p class="text-neutral-300 mt-1">[OK] Write Lock released (Auto-lock in 60s)</p>
          <p class="text-neutral-500 mt-3 text-xs">PII Masking (privacy.rs): user@email.com → [EMAIL_MASKED]</p>
        </div>
        <div class="order-1 lg:order-2">
          <p class="text-caption text-accent-300 font-medium tracking-wide uppercase mb-3">Zero Trust Security</p>
          <h2 class="text-h2 text-neutral-100 mb-6">Never trust LLM output</h2>
          <p class="text-body-lg text-neutral-400 mb-8">
            All AI-generated commands must pass through 5 layers of security before execution. Depending on the risk level, actions require automatic approval, Write Lock release, or per-item user confirmation.
          </p>
          <ul class="space-y-3">
            {[
              'policy.rs — 3-level classification: Safe / Caution / Critical',
              'security.rs — Automatic risk analysis of shell commands',
              'privacy.rs — Automatic masking of PII like emails and card numbers',
              'tool_policy.rs — Allow/Denylist management for different tools',
              'Write Lock — Locked by default, with automatic timed re-locking',
            ].map((item) => (
              <li class="flex items-start gap-3 text-body text-neutral-300">
                <svg class="w-5 h-5 text-accent-400 flex-shrink-0 mt-0.5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" /></svg>
                <span><code class="text-accent-300 text-sm">{item.split(' — ')[0]}</code> — {item.split(' — ')[1]}</span>
              </li>
            ))}
          </ul>
        </div>
      </div>
    </Container>
  </Section>

  <!-- Feature 3: Integrations -->
  <Section background="light">
    <Container>
      <div class="max-w-4xl mx-auto text-center animate-on-scroll">
        <p class="text-caption text-accent-300 font-medium tracking-wide uppercase mb-3">Integrations & Automation</p>
        <h2 class="text-h2 text-neutral-100 mb-6">Real-time integration with external services</h2>
        <p class="text-body-lg text-neutral-400 mb-12 max-w-2xl mx-auto">
          Natively integrate with Gmail, Calendar, and Notion. Remote control your computer with Telegram, and automate with hundreds of services using n8n.
        </p>
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-5 text-left">
          {[
            { title: 'Gmail', desc: 'Automatically handle email lookup, sending, and classification.', module: 'gmail.rs' },
            { title: 'Calendar', desc: 'Manage schedules, creation, and reminders.', module: 'calendar.rs' },
            { title: 'Notion', desc: 'Read/write pages and query databases.', module: 'notion.rs' },
            { title: 'Telegram', desc: 'Remote control your computer from your phone while away.', module: 'telegram.rs' },
          ].map((item) => (
            <div class="bg-[#14161b] rounded-lg p-6 border border-white/10">
              <h3 class="text-h4 text-neutral-100 mb-2">{item.title}</h3>
              <p class="text-caption text-neutral-400 mb-3">{item.desc}</p>
              <p class="text-xs text-neutral-600 font-mono">{item.module}</p>
            </div>
          ))}
        </div>
        <div class="mt-8">
          <Button variant="primary" size="lg" href={lang === 'en' ? "/en/solutions" : "/solutions"}>View All Solutions</Button>
        </div>
      </div>
    </Container>
  </Section>

  <!-- Feature 4: Pattern & Workflow -->
  <Section>
    <Container>
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-16 items-center animate-on-scroll">
        <div>
          <p class="text-caption text-accent-300 font-medium tracking-wide uppercase mb-3">Shadow Mode & Workflow</p>
          <h2 class="text-h2 text-neutral-100 mb-6">Learn usage patterns and auto-generate workflows</h2>
          <p class="text-body-lg text-neutral-400 mb-8">
            The Rust-native Collector gathers OS sensor data in the background, and Shadow Mode identifies repeating routines to recommend optimal automation workflows.
          </p>
          <ul class="space-y-3">
            {[
              'routine — Automatic analysis of repeating patterns over the last 7 days',
              'recommend — AI-based automation suggestions',
              'build_workflow — Natural language to n8n workflow transformation',
            ].map((item) => (
              <li class="flex items-start gap-3 text-body text-neutral-300">
                <svg class="w-5 h-5 text-accent-400 flex-shrink-0 mt-0.5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" /></svg>
                <span><code class="text-accent-300 text-sm">{item.split(' — ')[0]}</code> — {item.split(' — ')[1]}</span>
              </li>
            ))}
          </ul>
        </div>
        <div class="bg-[#14161b] rounded-lg border border-white/10 p-6 font-mono text-sm text-neutral-400">
          <div class="flex items-center gap-2 mb-4 pb-3 border-b border-white/5">
            <span class="w-2.5 h-2.5 rounded-full bg-[#ff5f57]"></span>
            <span class="w-2.5 h-2.5 rounded-full bg-[#febc2e]"></span>
            <span class="w-2.5 h-2.5 rounded-full bg-[#28c840]"></span>
            <span class="ml-2 text-xs text-neutral-600">nova-agent</span>
          </div>
          <p class="text-[#8fd5a6]">&gt; routine</p>
          <p class="text-neutral-300 mt-2">Analyzed repeating patterns (Last 7 days):</p>
          <p class="text-neutral-400 ml-4">1. VS Code → Terminal → git commit (3 times daily)</p>
          <p class="text-neutral-400 ml-4">2. Slack → Chrome → Google Docs (5 times daily)</p>
          <p class="text-neutral-400 ml-4">3. Finder → Terminal → npm run dev (4 times daily)</p>
          <p class="text-[#8fd5a6] mt-3">&gt; build_workflow "Send KPI report to Slack every Monday at 9 AM"</p>
          <p class="text-neutral-300 mt-2">Analyzing with LLM...</p>
          <p class="text-neutral-300">Generating n8n workflow:</p>
          <p class="text-neutral-400 ml-4">├─ Trigger: Schedule (Monday 09:00 KST)</p>
          <p class="text-neutral-400 ml-4">├─ Action: Google Sheets → Read KPI</p>
          <p class="text-neutral-400 ml-4">├─ Action: Format → Markdown Report</p>
          <p class="text-neutral-400 ml-4">└─ Action: Slack → #team-weekly</p>
          <p class="text-[#8fd5a6] mt-2">[OK] workflow_weekly_kpi.json generated successfully</p>
        </div>
      </div>
    </Container>
  </Section>

  <!-- Architecture: Desktop & Web UI -->
  <Section background="light">
    <Container>
      <div class="max-w-4xl mx-auto text-center animate-on-scroll">
        <p class="text-caption text-accent-300 font-medium tracking-wide uppercase mb-3">Desktop & Web UI</p>
        <h2 class="text-h2 text-neutral-100 mb-6">From CLI to Desktop App, use it the way you want</h2>
        <p class="text-body-lg text-neutral-400 mb-12 max-w-2xl mx-auto">
          Visually manage dashboards, chat, and workflows with our React/Vite-based Web UI, and deploy native desktop apps with Tauri.
        </p>
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-5 text-left">
          {[
            { title: 'Dashboard', desc: 'Check system status, pattern statistics, and execution logs at a glance.' },
            { title: 'Chat', desc: 'Interact with the agent using natural language to give tasks.' },
            { title: 'Workflows', desc: 'Manage and edit n8n workflows visually.' },
            { title: 'Routines', desc: 'Check detected patterns and automation recommendations.' },
            { title: 'Audit Log', desc: 'Track all execution history and security events.' },
            { title: 'Settings', desc: 'Configure environment settings, API keys, and security policies.' },
          ].map((item) => (
            <div class="bg-[#14161b] rounded-lg p-6 border border-white/10">
              <h3 class="text-h4 text-neutral-100 mb-2">{item.title}</h3>
              <p class="text-caption text-neutral-400">{item.desc}</p>
            </div>
          ))}
        </div>
      </div>
    </Container>
  </Section>

  <!-- FAQ -->
  <Section>
    <Container narrow>
      <div class="animate-on-scroll">
        <div class="text-center mb-12">
          <h2 class="text-h2 text-neutral-100 mb-4">Frequently Asked Questions</h2>
          <p class="text-body-lg text-neutral-400">Core questions about installation, security, and features.</p>
        </div>
        <Accordion items={faqItems} />
      </div>
    </Container>
  </Section>

  <!-- CTA -->
  <Section background="dark">
    <Container>
      <div class="text-center animate-on-scroll">
        <h2 class="text-h2 text-white mb-4">Get Started Today</h2>
        <p class="text-body-lg text-neutral-400 max-w-xl mx-auto mb-10">
          Cloning, building, and running takes only 5 minutes. Experience the performance of 73+ Rust modules for yourself.
        </p>
        <div class="flex flex-col sm:flex-row items-center justify-center gap-4">
          <Button variant="primary" size="lg" href={lang === 'en' ? "/en/docs/getting-started" : "/docs/getting-started"}>Get Started</Button>
          <Button variant="ghost" size="lg" href="https://github.com/NOVA-ALLRounder/main" external>GitHub</Button>
        </div>
      </div>
    </Container>
  </Section>

  <Footer slot="footer" lang="en" />
</BaseLayout>

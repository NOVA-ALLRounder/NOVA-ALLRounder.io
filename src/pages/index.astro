---
import BaseLayout from '../layouts/BaseLayout.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import Section from '../components/ui/Section.astro';
import Container from '../components/ui/Container.astro';
import Button from '../components/ui/Button.astro';
import StepCard from '../components/ui/StepCard.astro';
import Accordion from '../components/ui/Accordion.astro';
import InstallTabsShowcase from '../components/InstallTabsShowcase.astro';
import WorkflowAnimation from '../components/WorkflowAnimation.astro';

const faqItems = [
  {
    question: '어떤 운영체제를 지원하나요?',
    answer:
      '현재 macOS 12+(Monterey) 이상을 기본 지원하며, Windows 서비스 실행(run_core.ps1)도 제공합니다. Rust 네이티브 빌드이므로 Linux에서도 빌드 가능합니다.',
  },
  {
    question: 'OpenAI API Key가 반드시 필요한가요?',
    answer:
      '네. LLM 기반 행동 패턴 분석(analyzer.rs)과 자연어 워크플로우 생성(build_workflow)에 OpenAI API를 사용합니다. .env 파일에 OPENAI_API_KEY를 설정해야 합니다.',
  },
  {
    question: 'n8n 없이도 사용할 수 있나요?',
    answer:
      '네. n8n은 선택적 워크플로우 오케스트레이션 레이어입니다. 코어 에이전트(routine, recommend, exec, control)는 n8n 없이 독립적으로 동작합니다.',
  },
  {
    question: '보안은 어떻게 처리되나요?',
    answer:
      'exec 명령어는 rm, sudo 등 위험한 키워드를 자동 차단합니다. 기본적으로 Write Lock이 활성화되어 있어 unlock 명령어로 명시적 해제가 필요합니다. 보안 정책은 policy.rs에서 관리됩니다.',
  },
  {
    question: '데이터 수집은 어떻게 동작하나요?',
    answer:
      'Rust Collector가 OS센서 데이터를 수집하여 SQLite(steer.db)에 저장합니다. 5분 단위 집약(minute_aggregates), 일일 요약(daily_summaries), retention cleanup을 자동 실행합니다.',
  },
  {
    question: '팀에서 함께 사용할 수 있나요?',
    answer:
      'Tauri 기반 데스크톱 앱으로 배포 가능하며, n8n 워크플로우를 팀 전체에 공유할 수 있습니다. Self-Healing Guardian(steer-guardian.sh)이 크래시 시 자동 재시작을 보장합니다.',
  },
];
---

<BaseLayout title="NOVA — Local Super Hyper Ultra Ultimate Super Awesome Agent" description="사용자 행동 기반 자동화 에이전트. 컴퓨터 사용 패턴을 분석하여 자동화를 추천하고 실행합니다.">
  <Header slot="header" />

  <Section padding="large" class="bg-[#0d0e11] text-white">
    <Container>
      <div class="max-w-4xl mx-auto text-center animate-on-scroll">
        <p class="accent-pill mb-4">Local Super Hyper Ultra Ultimate Super Awesome Agent</p>
        <h1 class="text-h1 md:text-display text-white mb-6 text-balance max-w-3xl mx-auto">
          Local Super Hyper Ultra Ultimate
          <br class="hidden lg:block" />
          Super Awesome Agent
        </h1>
        <p class="text-body-lg text-neutral-400 max-w-2xl mx-auto mb-10">
          사용자 행동 기반 자동화 에이전트 — 컴퓨터 사용 패턴을 분석하여 자동화를 추천하고 실행합니다.
          Rust 네이티브, macOS/Windows 지원, LLM 기반 분석.
        </p>

        <div class="flex flex-col sm:flex-row items-center justify-center gap-3 mb-10">
          <Button variant="primary" size="lg" href="/docs/getting-started" class="whitespace-nowrap">Start</Button>
          <Button variant="secondary" size="lg" href="/product" class="whitespace-nowrap">View Demo</Button>
        </div>

        <WorkflowAnimation />
      </div>
    </Container>
  </Section>

  <Section class="bg-[#0f1116]">
    <Container>
      <InstallTabsShowcase />
    </Container>
  </Section>

  <Section class="bg-[#0f1116]">
    <Container>
      <div class="animate-on-scroll">
        <p class="text-center text-caption text-neutral-500 font-medium tracking-wide uppercase mb-10">핵심 CLI 명령어</p>

        <div class="flex flex-wrap items-center justify-center gap-8 md:gap-16 mb-16">
          {['routine', 'recommend', 'control', 'build_workflow', 'exec', 'status'].map((name) => (
            <div class="flex items-center justify-center h-8 px-4 text-neutral-400 text-sm font-mono font-semibold tracking-wider">{name}</div>
          ))}
        </div>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 max-w-3xl mx-auto">
          {[
            { value: '6', label: 'CLI 명령어' },
            { value: '12+', label: 'Core 모듈' },
            { value: '10+', label: '환경변수 설정' },
          ].map((stat) => (
            <div class="text-center rounded-lg border border-white/10 bg-[#14161b] py-8">
              <p class="text-h2 text-white font-bold">{stat.value}</p>
              <p class="text-caption text-neutral-500 mt-1">{stat.label}</p>
            </div>
          ))}
        </div>
      </div>
    </Container>
  </Section>

  <Section>
    <Container>
      <div class="text-center mb-16 animate-on-scroll">
        <h2 class="text-h2 text-neutral-100 mb-4">How It Works</h2>
        <p class="text-body-lg text-neutral-400 max-w-xl mx-auto">OS 센서 데이터 수집부터 패턴 분석, 자동 실행까지 세 단계.</p>
      </div>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-12 animate-on-scroll">
        <StepCard step={1} title="Collect" description="OS 센서가 앱 사용, 키 입력, 시스템 이벤트를 실시간 수집하여 SQLite에 저장합니다." />
        <StepCard step={2} title="Analyze" description="LLM 기반 analyzer가 행동 패턴을 분석하고, 반복 루틴과 자동화 기회를 식별합니다." />
        <StepCard step={3} title="Automate" description="n8n 워크플로우 생성, 앱 제어, 셸 명령 실행으로 자동화를 즉시 적용합니다." />
      </div>
    </Container>
  </Section>

  <Section background="light">
    <Container>
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-16 items-center animate-on-scroll">
        <div>
          <p class="text-caption text-accent-300 font-medium tracking-wide uppercase mb-3">행동 패턴 분석</p>
          <h2 class="text-h2 text-neutral-100 mb-6">반복 작업을 자동으로 감지하고 추천합니다</h2>
          <p class="text-body-lg text-neutral-400 mb-8">
            OS 수준의 센서 데이터를 수집하고, LLM이 사용 패턴을 분석하여 자동화할 수 있는 루틴을 추천합니다.
          </p>
          <ul class="space-y-3">
            {[
              'routine — 현재 반복 패턴 분석 결과 확인',
              'recommend — AI 기반 자동화 추천 목록',
              'status — 시스템 상태 및 모니터링 현황',
            ].map((item) => (
              <li class="flex items-start gap-3 text-body text-neutral-300">
                <svg class="w-5 h-5 text-accent-400 flex-shrink-0 mt-0.5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" /></svg>
                <span><code class="text-accent-300 text-sm">{item.split(' — ')[0]}</code> — {item.split(' — ')[1]}</span>
              </li>
            ))}
          </ul>
        </div>
        <div class="bg-[#14161b] rounded-lg border border-white/10 p-6 font-mono text-sm text-neutral-400">
          <p class="text-neutral-500 mb-3">$ ./target/release/core</p>
          <p class="text-[#8fd5a6]">&gt; routine</p>
          <p class="text-neutral-300 mt-2">분석된 반복 패턴:</p>
          <p class="text-neutral-400 ml-4">1. VS Code → Terminal → git commit (매일 3회)</p>
          <p class="text-neutral-400 ml-4">2. Slack → Chrome → Docs (매일 5회)</p>
          <p class="text-neutral-400 ml-4">3. Finder → Terminal → npm run (매일 4회)</p>
          <p class="text-[#8fd5a6] mt-3">&gt; recommend</p>
          <p class="text-neutral-300 mt-2">추천 자동화:</p>
          <p class="text-neutral-400 ml-4">→ git auto-commit 워크플로우 생성</p>
          <p class="text-neutral-400 ml-4">→ 문서 리뷰 알림 자동화</p>
        </div>
      </div>
    </Container>
  </Section>

  <Section>
    <Container>
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-16 items-center animate-on-scroll">
        <div class="order-2 lg:order-1 bg-[#14161b] rounded-lg border border-white/10 p-6 font-mono text-sm text-neutral-400">
          <p class="text-neutral-500 mb-3">$ ./target/release/core</p>
          <p class="text-[#8fd5a6]">&gt; control Safari open</p>
          <p class="text-neutral-300 mt-1">[OK] Safari 실행 완료</p>
          <p class="text-[#8fd5a6] mt-3">&gt; exec "echo hello"</p>
          <p class="text-neutral-300 mt-1">[OK] hello</p>
          <p class="text-[#8fd5a6] mt-3">&gt; exec "rm -rf /"</p>
          <p class="text-red-400 mt-1">[BLOCKED] 보안 정책 위반: 위험한 명령어 차단됨</p>
          <p class="text-[#8fd5a6] mt-3">&gt; build_workflow "매일 아침 9시에 Slack 알림"</p>
          <p class="text-neutral-300 mt-1">n8n 워크플로우 생성 중...</p>
          <p class="text-neutral-300 mt-1">[OK] workflow_2026-02-12.json 생성 완료</p>
        </div>
        <div class="order-1 lg:order-2">
          <p class="text-caption text-accent-300 font-medium tracking-wide uppercase mb-3">보안 & 제어</p>
          <h2 class="text-h2 text-neutral-100 mb-6">위험한 명령은 차단하고, 안전한 자동화만 실행합니다</h2>
          <p class="text-body-lg text-neutral-400 mb-8">
            policy.rs 기반 보안 정책 엔진이 위험한 키워드를 자동 감지하고, Write Lock으로 실수를 방지합니다.
          </p>
          <ul class="space-y-3">
            {[
              'exec 명령어에서 rm, sudo 등 위험 키워드 자동 차단',
              '기본 Write Lock 활성화 — unlock 명령어로 해제',
              'control 명령어로 앱을 안전하게 제어',
            ].map((item) => (
              <li class="flex items-start gap-3 text-body text-neutral-300">
                <svg class="w-5 h-5 text-accent-400 flex-shrink-0 mt-0.5" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" /></svg>
                <span>{item}</span>
              </li>
            ))}
          </ul>
        </div>
      </div>
    </Container>
  </Section>

  <Section background="light">
    <Container>
      <div class="max-w-3xl mx-auto text-center animate-on-scroll">
        <p class="text-caption text-accent-300 font-medium tracking-wide uppercase mb-3">For Individuals</p>
        <h2 class="text-h2 text-neutral-100 mb-6">반복을 자동화하고, 진짜 일에 집중하세요</h2>
        <p class="text-body-lg text-neutral-400 mb-10">개인 워크플로우를 자동 분석하고, 루틴을 실행 가능한 자동화로 변환합니다.</p>
        <div class="grid grid-cols-1 sm:grid-cols-3 gap-6 mb-10 text-left">
          {[
            { title: 'routine', desc: '반복 행동 패턴을 분석하여 자동화 기회를 발견합니다.' },
            { title: 'control', desc: '앱 실행, 전환, 종료를 CLI 한 줄로 제어합니다.' },
            { title: 'build_workflow', desc: '자연어 프롬프트로 n8n 워크플로우를 자동 생성합니다.' },
          ].map((item) => (
            <div class="bg-[#14161b] rounded-lg p-6 border border-white/10">
              <h3 class="text-h4 text-neutral-100 mb-2 font-mono">{item.title}</h3>
              <p class="text-caption text-neutral-400">{item.desc}</p>
            </div>
          ))}
        </div>
        <Button variant="primary" size="lg" href="/docs/getting-started">시작하기</Button>
      </div>
    </Container>
  </Section>

  <Section>
    <Container>
      <div class="max-w-3xl mx-auto text-center animate-on-scroll">
        <p class="text-caption text-accent-300 font-medium tracking-wide uppercase mb-3">For Teams</p>
        <h2 class="text-h2 text-neutral-100 mb-6">팀 전체에 자동화를 배포하고 관리하세요</h2>
        <p class="text-body-lg text-neutral-400 mb-10">
          Tauri 데스크톱 앱, n8n 워크플로우 공유, Self-Healing Guardian으로 팀 규모 자동화를 운영합니다.
        </p>
        <div class="grid grid-cols-1 sm:grid-cols-3 gap-6 mb-10 text-left">
          {[
            { title: 'Desktop Bundle', desc: 'Tauri 기반 .app / .exe 데스크톱 앱으로 원클릭 배포합니다.' },
            { title: 'n8n Integration', desc: 'Docker/NPX로 n8n을 실행하고 팀 워크플로우를 중앙 관리합니다.' },
            { title: 'Self-Healing', desc: 'steer-guardian.sh가 크래시 시 코어 프로세스를 자동 재시작합니다.' },
          ].map((item) => (
            <div class="bg-[#14161b] rounded-lg p-6 border border-white/10">
              <h3 class="text-h4 text-neutral-100 mb-2">{item.title}</h3>
              <p class="text-caption text-neutral-400">{item.desc}</p>
            </div>
          ))}
        </div>
        <Button variant="primary" size="lg" href="/solutions">자세히 보기</Button>
      </div>
    </Container>
  </Section>

  <Section background="light">
    <Container narrow>
      <div class="animate-on-scroll">
        <div class="text-center mb-12">
          <h2 class="text-h2 text-neutral-100 mb-4">자주 묻는 질문</h2>
          <p class="text-body-lg text-neutral-400">설치, 보안, 데이터 수집에 대한 핵심 질문들.</p>
        </div>
        <Accordion items={faqItems} />
      </div>
    </Container>
  </Section>

  <Section background="dark">
    <Container>
      <div class="text-center animate-on-scroll">
        <h2 class="text-h2 text-white mb-4">지금 바로 시작하세요</h2>
        <p class="text-body-lg text-neutral-400 max-w-xl mx-auto mb-10">
          Clone, 빌드, 실행까지 5분이면 충분합니다. Rust 네이티브의 속도를 경험하세요.
        </p>
        <div class="flex flex-col sm:flex-row items-center justify-center gap-4">
          <Button variant="primary" size="lg" href="/docs/getting-started">시작하기</Button>
          <Button variant="ghost" size="lg" href="/contact">문의하기</Button>
        </div>
      </div>
    </Container>
  </Section>

  <Footer slot="footer" />
</BaseLayout>

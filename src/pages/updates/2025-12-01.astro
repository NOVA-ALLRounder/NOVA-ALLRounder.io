---
import BaseLayout from '../../layouts/BaseLayout.astro';
import Header from '../../components/Header.astro';
import Footer from '../../components/Footer.astro';
import Section from '../../components/ui/Section.astro';
import Container from '../../components/ui/Container.astro';
import Badge from '../../components/ui/Badge.astro';

const repo = process.env.GITHUB_REPOSITORY?.split('/')[1] ?? '';
const isUserSiteRepo = repo.endsWith('.github.io');
const basePath = process.env.GITHUB_ACTIONS === 'true' ? (isUserSiteRepo ? '/' : `/${repo}/`) : '/';
const withBase = (url: string) => {
  if (!url.startsWith('/')) return url;
  const clean = url.replace(/^\/+/, '');
  return clean ? `${basePath}${clean}` : basePath;
};
---

<BaseLayout
  title="RBAC 및 감사 로그 기반 추가 - NOVA 업데이트"
  description="기본 보안 및 거버넌스 롤아웃 릴리스 노트."
  lang="ko"
>
  <Header slot="header" lang="ko" />

  <Section padding="large">
    <Container narrow>
      <article class="animate-on-scroll">
        <a href={withBase('/updates')} class="inline-flex items-center text-sm text-neutral-400 hover:text-neutral-100 mb-8">
          &larr; 업데이트 목록으로
        </a>
        <div class="flex items-center gap-3 mb-4">
          <time datetime="2025-12-01" class="text-sm text-neutral-400">2025.12.01</time>
          <Badge text="보안" variant="warning" />
        </div>
        <h1 class="text-h1 text-neutral-100 mb-6">RBAC 및 감사 로그 기반 추가</h1>
        <p class="text-body-lg text-neutral-400 mb-12">
          팀 중심 배포에서의 기초 거버넌스 역량 릴리스 노트.
        </p>

        <div class="space-y-8">
          <section>
            <h2 class="text-h3 text-neutral-100 mb-3">보안 추가 기능</h2>
            <ul class="list-disc pl-6 space-y-2 text-neutral-300">
              <li>역할 기반 접근 제어(RBAC) 기본 구조.</li>
              <li>활동 로그 수집 및 내보내기 기반.</li>
              <li>거버넌스 워크플로우를 위한 관리자 변경 추적 뷰.</li>
            </ul>
          </section>

          <section>
            <h2 class="text-h3 text-neutral-100 mb-3">도입 가이드</h2>
            <p class="text-body text-neutral-300">
              제한된 범위의 역할 모델로 시작하여 접근 경계를 검증한 후, 팀 전체로 확장하세요.
            </p>
          </section>
        </div>
      </article>
    </Container>
  </Section>

  <Footer slot="footer" />
</BaseLayout>
